<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Spicejs by spicejs</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Spicejs</h1>
        <p class="header">A minimal lib for creating MVC applications with javascript</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/spicejs/spicejs/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/spicejs/spicejs/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/spicejs/spicejs">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/spicejs">spicejs</a></p>


      </header>
      <section>
        <p><img src="http://spicejs.github.io/spicejs/images/spicejs.png" alt="spice.js">
<a href="https://travis-ci.org/spicejs/spicejs"><img src="https://travis-ci.org/spicejs/spicejs.svg?branch=master" alt="Build Status"></a></p>

<h1>
<a id="what-is-spicejs" class="anchor" href="#what-is-spicejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is <em>Spice.js</em>?</h1>

<p><em>Spice</em> is a super minimal (&lt; 3k) and flexible MVC framework for javascript. <em>Spice</em> was built to be easily added to any existent application and play well with other technologies such as jQuery, pjax, turbolinks, node or whatever else you are using.</p>

<h2>
<a id="why-yet-an-other-mvc-framework" class="anchor" href="#why-yet-an-other-mvc-framework" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why yet an other MVC framework?</h2>

<p>Currently all major MVC frameworks for javascript have a huge API and you end up writing more code to satisfy the the framework requirements than your own business logic, that leads to code that is tightly coupled to the framework and hard to reuse, sometimes even hard to update for new versions of the framework.</p>

<p>On <em>Spice</em> most of the code you write is pure javascript the framework API is minimal (just 5 methods) that helps you to make your code easier to reuse and test. The core of <em>Spice</em> is pure javascript (without any external dependency) that is fully unit tested and can be easily extended. This documentation will explain with examples how you can use <em>Spice</em> to build cool web apps.</p>

<p><em>Spice</em>.js was inspired by <a href="http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)">the SOLID Principles</a>, <a href="http://jquery.com/">jQuery</a> and <a href="https://github.com/muut/riotjs">Riot.js</a>.</p>

<h3>
<a id="the-good" class="anchor" href="#the-good" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Good</h3>

<ul>
<li>
<strong>Easy to learn</strong>: <em>Spice</em> will few very straight forward for developers are familiar with jQuery and JavaScript.</li>
<li>
<strong>Unobtrusive JavaScript</strong>: <em>Spice</em> makes <a href="http://en.wikipedia.org/wiki/Progressive_enhancement">progressive enhancement</a> simpler, you can load your views on the server and use <em>Spice</em>'s controllers to add frontend features.</li>
<li>
<strong>Powerful template engine</strong>: <em>Spice</em> comes with <code>S.template</code> which creates a precompiled template that is supper fast, you can also write any javascript code in your template without having to learn different syntaxes.</li>
<li>
<strong>Routes</strong>: You can use routes to bind controllers and plugins, on pages where they are needed and you can have more than one route callback matching the same path.</li>
<li>
<strong>Observables</strong>: You can turn any javascript object, or function, into an observable that can listen and trigger events.</li>
<li>
<strong>Supper Flexible</strong>: You can use any javascript lib or jQuery plugin with <em>Spice</em>, there is extensions for jQuery controllers, turbolinks and it is easy to write other extensions for the features you need.</li>
<li>
<strong>Write once use everywhere</strong>: <em>Spice</em> promotes reuse, it is easy to create generic controlers and models that can be reused in diferent parts of the same app or on diferent apps.</li>
<li>
<strong>Testable</strong>: Is very simple to test <em>Spice</em> code, controllers are just a function, templates are just a string and observables are just objects. <em>Spice</em> also comes out of the box with a simple BDD framework.</li>
</ul>

<h3>
<a id="the-bad" class="anchor" href="#the-bad" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Bad</h3>

<ul>
<li>
<strong>Too Flexible</strong>: There is no restriction on your code structure so you can make a very good architecture with <em>Spice</em> or a very bad one.</li>
<li>
<strong>Too Young</strong>: It is a new project so there is not much documentation yet.</li>
</ul>

<h3>
<a id="the-ugly" class="anchor" href="#the-ugly" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Ugly</h3>

<ul>
<li>
<strong>Using with other MVC Frameworks</strong>: It is possible to use <em>Spice</em> with other javascript frameworks but that is not recommended since it could lead to a confusing code.</li>
</ul>

<h1>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h1>

<p>The best way to install <code>Spice.js</code>, and most js packages, is using bower:</p>

<pre><code>$ bower install _Spice_
</code></pre>

<p>By default bower will install packages in <code>./bower_components</code> so you can add <em>Spice</em> and the extensions you need using:</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/min.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
<span class="pl-c">&lt;!-- or "bower_components/spicejs/index.js" for the uncompressed version --&gt;</span>

<span class="pl-c">&lt;!-- Polyfill extension for compatibility with older browsers (IE 7) --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/polyfill.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;

<span class="pl-c">&lt;!-- Route extension for browser navigation and push state --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/route_browser.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;

<span class="pl-c">&lt;!-- Add other extensions as needed... --&gt;</span></pre></div>

<p>If you don't want to use bower you can just copy the files you need from <a href="https://github.com/spicejs/spicejs">https://github.com/spicejs/spicejs</a>.</p>

<h2>
<a id="spice-on-nodejs" class="anchor" href="#spice-on-nodejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<em>Spice</em> on Node.js</h2>

<p>You can use Spice.js on node, to include <em>Spice</em> do:</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> S <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>./bower_components/spicejs<span class="pl-pds">'</span></span>);

<span class="pl-c">// now you can user _Spice_ on the backend</span></pre></div>

<h1>
<a id="test-driven-development" class="anchor" href="#test-driven-development" aria-hidden="true"><span class="octicon octicon-link"></span></a>Test Driven Development</h1>

<p>Testability was the main focus of <em>Spice</em> the framework was built to be decoupled and easy to test since it started. That is why it also includes a mini <a href="https://github.com/spicejs/spicejs/blob/master/bdd.js">BDD</a> (Dehaiviour Driven Development) framework that was inspired by <a href="http://jasmine.github.io/">jasmine</a> but is <strong>only 30 lines of code</strong> and works on node and the browser.</p>

<h2>
<a id="bdd-on-the-browser" class="anchor" href="#bdd-on-the-browser" aria-hidden="true"><span class="octicon octicon-link"></span></a>BDD on the Browser</h2>

<div class="highlight highlight-html"><pre>&lt;!doctype html&gt;
&lt;<span class="pl-ent">html</span>&gt;
  &lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">title</span>&gt;My Test&lt;/<span class="pl-ent">title</span>&gt;
<span class="pl-s2">    &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/bdd.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>

    <span class="pl-c">&lt;!-- the bdd framework can be used with or without spice --&gt;</span>
<span class="pl-s2">    &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/index.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>

    <span class="pl-c">&lt;!-- Add all source files the you are testing here --&gt;</span>
<span class="pl-s2">    &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>js/some_file_that_will_be_tested.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
    ...
  &lt;/<span class="pl-ent">head</span>&gt;

  &lt;<span class="pl-ent">body</span>&gt;
    <span class="pl-c">&lt;!-- The test results will be displayed on the browser console %&gt;</span>
<span class="pl-c">    &lt;p&gt;Open console to view the results&lt;/p&gt;</span>
<span class="pl-c"></span>
<span class="pl-c">    &lt;!<span class="pl-ii">--</span> Add all test files here --&gt;</span>
<span class="pl-s2">    &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>test/some_file_that_will_be_tested_test.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
    ...
  &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/index.html">test/index.html</a> for <em>Spice</em> it self.</p>

<h2>
<a id="bdd-on-nodejs" class="anchor" href="#bdd-on-nodejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>BDD on Node.js</h2>

<div class="highlight highlight-js"><pre><span class="pl-c">// This is needed if the app you are testing uses spice</span>
<span class="pl-sv">global</span>.S <span class="pl-k">=</span> <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>bower_components/spicejs/index<span class="pl-pds">'</span></span>);

[
  <span class="pl-s1"><span class="pl-pds">'</span>bower_components/spicejs/bdd<span class="pl-pds">'</span></span>,
  <span class="pl-c">// require all your test files after the bdd framework</span>
  <span class="pl-s1"><span class="pl-pds">'</span>test/your_awesome_test<span class="pl-pds">'</span></span>,
].forEach(<span class="pl-st">function</span>(<span class="pl-vpf">file</span>){
  <span class="pl-s3">require</span>(<span class="pl-s1"><span class="pl-pds">'</span>./<span class="pl-pds">'</span></span> <span class="pl-k">+</span> file <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span>.js<span class="pl-pds">'</span></span>);
});</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/node.js">test/node.js</a> for <em>Spice</em> it self.</p>

<h2>
<a id="writing-tests" class="anchor" href="#writing-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Writing tests</h2>

<div class="highlight highlight-js"><pre><span class="pl-c">// Some object</span>
<span class="pl-s">var</span> counter <span class="pl-k">=</span> {
  index<span class="pl-k">:</span> <span class="pl-c1">0</span>,
  <span class="pl-en">add</span>: <span class="pl-st">function</span>() { <span class="pl-v">this</span>.<span class="pl-sc">index</span><span class="pl-k">++</span>; }
};

<span class="pl-c">// Testing the object</span>
describe(<span class="pl-s1"><span class="pl-pds">'</span>counter<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
  it(<span class="pl-s1"><span class="pl-pds">'</span>starts with index === 0<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    assert.equal(counter.<span class="pl-sc">index</span>, <span class="pl-c1">0</span>);
  });

  describe(<span class="pl-s1"><span class="pl-pds">'</span>#add<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
    <span class="pl-s">var</span> c <span class="pl-k">=</span> <span class="pl-s3">Object</span>.create(counter);

    it(<span class="pl-s1"><span class="pl-pds">'</span>increments the index<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
      c.<span class="pl-s3">add</span>(); assert.equal(c.<span class="pl-sc">index</span>, <span class="pl-c1">1</span>);
      c.<span class="pl-s3">add</span>(); assert.equal(c.<span class="pl-sc">index</span>, <span class="pl-c1">2</span>);
      c.<span class="pl-s3">add</span>(); assert.equal(c.<span class="pl-sc">index</span>, <span class="pl-c1">3</span>);
    });
  });
});</pre></div>

<h1>
<a id="sobservableobject" class="anchor" href="#sobservableobject" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.observable(object)</h1>

<p>This method turns any object or function into an <code>observable</code> by adding some methods for dealing with events properties and inheritance. The <code>observable</code> can be considered the M (Model) of MVC, if is deals with data and business logic.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Example of a a Search model</span>
<span class="pl-s">var</span> Search <span class="pl-k">=</span> S.observable({
  query<span class="pl-k">:</span> <span class="pl-c1">undefined</span>,
  page<span class="pl-k">:</span> <span class="pl-c1">1</span>,

  <span class="pl-en">search</span>: <span class="pl-st">function</span>(<span class="pl-vpf">path</span>, <span class="pl-vpf">query</span>) {
    <span class="pl-s">var</span> self <span class="pl-k">=</span> <span class="pl-v">this</span>;

    $.get(path, {
      format<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>json<span class="pl-pds">'</span></span>,
      search<span class="pl-k">:</span> query
    }).done(<span class="pl-st">function</span>(<span class="pl-vpf">data</span>) {
      self.query <span class="pl-k">=</span> query;
      self.page <span class="pl-k">=</span> <span class="pl-c1">1</span>;

      <span class="pl-c">// Triggers an event on the Search object.</span>
      self.trigger(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>, data, query);
    });
  }
});</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/lib/observable_test.js">unit tests</a> for <code>S.observable</code>.</p>

<h2>
<a id="observableonevent-callback" class="anchor" href="#observableonevent-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.on(event, callback)</h2>

<p>Observables can listen to events using the the <code>on</code> callback.</p>

<div class="highlight highlight-js"><pre>Search.on(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">data</span>, <span class="pl-vpf">query</span>) {
  <span class="pl-en">console</span><span class="pl-s3">.log</span>(data); <span class="pl-c">// prints the data returned by the search</span>
  <span class="pl-en">console</span><span class="pl-s3">.log</span>(data); <span class="pl-c">// prints the query used to search</span>
});</pre></div>

<h2>
<a id="observableoneevent-callback" class="anchor" href="#observableoneevent-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.one(event, callback)</h2>

<p>Does the same as '<code>observable.on</code>' but the callback is automatically removed after called the first time.</p>

<h2>
<a id="observableoffevent-callback" class="anchor" href="#observableoffevent-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.off(event, callback)</h2>

<p>Allows you to remove event listeners.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Removes all callbacks</span>
Search.off();

<span class="pl-c">// Removes the 'search' callbacks</span>
Search.off(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>);

<span class="pl-c">// Removes just the `someCallback` function 'search' callbacks</span>
Search.off(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>, someCallback);</pre></div>

<h2>
<a id="observabletriggerevent-arg1-arg2" class="anchor" href="#observabletriggerevent-arg1-arg2" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.trigger(event, arg1, arg2...)</h2>

<p>Triggers an event, the arguments are passed to the callback lisetener.</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> data <span class="pl-k">=</span> [{id<span class="pl-k">:</span> <span class="pl-c1">1</span>, name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Borderlands<span class="pl-pds">'</span></span>}, {id<span class="pl-k">:</span> <span class="pl-c1">2</span>, name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">'</span>Doom 3<span class="pl-pds">'</span></span>}]
  , query <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">'</span>games<span class="pl-pds">'</span></span>;

<span class="pl-c">// This will call all callbacks attached to the 'search' event</span>
<span class="pl-c">// passing `data` and `query` as the arguments.</span>
Search.trigger(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>, data, query);</pre></div>

<h2>
<a id="observablesetkey-value" class="anchor" href="#observablesetkey-value" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.set(key, value)</h2>

<p>Sets the value of a property and triggers the events 'set' and <code>key</code>, passing</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> Order <span class="pl-k">=</span> S.observable({
  subtotal<span class="pl-k">:</span> <span class="pl-c1">0</span>,
  total<span class="pl-k">:</span> <span class="pl-c1">0</span>,
  shipping<span class="pl-k">:</span> <span class="pl-c1">0</span>
}).on(<span class="pl-s1"><span class="pl-pds">'</span>subtotal shipping<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">value</span>, <span class="pl-vpf">oldValue</span>) {
  <span class="pl-en">console</span><span class="pl-s3">.log</span>(<span class="pl-s1"><span class="pl-pds">'</span>changed from <span class="pl-pds">'</span></span> <span class="pl-k">+</span> oldValue <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span> to <span class="pl-pds">'</span></span> <span class="pl-k">+</span> value);
  <span class="pl-v">this</span>.set(<span class="pl-s1"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, <span class="pl-v">this</span>.subtotal <span class="pl-k">+</span> <span class="pl-v">this</span>.shipping);
}).on(<span class="pl-s1"><span class="pl-pds">'</span>set<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">attr</span>, <span class="pl-vpf">value</span>, <span class="pl-vpf">oldValue</span>) {
  <span class="pl-en">console</span><span class="pl-s3">.log</span>(attr <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span> changed from <span class="pl-pds">'</span></span> <span class="pl-k">+</span> oldValue <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">'</span> to <span class="pl-pds">'</span></span> <span class="pl-k">+</span> value);
});

<span class="pl-c">// Updates the subtotal to 10,</span>
<span class="pl-c">// the total will be altomatically set to 10</span>
Order.set(<span class="pl-s1"><span class="pl-pds">'</span>subtotal<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);

<span class="pl-c">// Updates the shipping to 2.50,</span>
<span class="pl-c">// the total will be altomatically set to 12.50</span>
Order.set(<span class="pl-s1"><span class="pl-pds">'</span>shipping<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);</pre></div>

<h2>
<a id="observablegetkey" class="anchor" href="#observablegetkey" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.get(key)</h2>

<p>Returns the value of a property.</p>

<div class="highlight highlight-js"><pre>Order.total <span class="pl-k">===</span> Order.get(<span class="pl-s1"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>);</pre></div>

<h2>
<a id="observablecreateproperties" class="anchor" href="#observablecreateproperties" aria-hidden="true"><span class="octicon octicon-link"></span></a>observable.create(properties)</h2>

<p>Creates a new object based on the observable, <em>Spice</em> uses prototypal inheritance to do changes made on the parrent object are inherited on the new one but changes on the child don't mess up with the parent.</p>

<div class="highlight highlight-js"><pre><span class="pl-s">var</span> TaxableOrder <span class="pl-k">=</span> Order.create({
  tax<span class="pl-k">:</span> <span class="pl-c1">0</span>

}).off(
  <span class="pl-c">// Removes the subtotal and shipping callbacks</span>
  <span class="pl-s1"><span class="pl-pds">'</span>subtotal shipping<span class="pl-pds">'</span></span>

).on(<span class="pl-s1"><span class="pl-pds">'</span>subtotal shipping tax<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>() {
  <span class="pl-c">// Adds the new callback</span>
  <span class="pl-v">this</span>.set(<span class="pl-s1"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, <span class="pl-v">this</span>.subtotal <span class="pl-k">+</span> <span class="pl-v">this</span>.shipping <span class="pl-k">+</span> <span class="pl-v">this</span>.tax);

});

<span class="pl-c">// Setting the tax updates the total</span>
TaxableOrder.set(<span class="pl-s1"><span class="pl-pds">'</span>tax<span class="pl-pds">'</span></span>, <span class="pl-c1">1</span>)
TaxableOrder.total <span class="pl-k">===</span> Order.total <span class="pl-k">+</span> <span class="pl-c1">1</span>

<span class="pl-c">// Overriding a property dont touch the parent</span>
TaxableOrder.set(<span class="pl-s1"><span class="pl-pds">'</span>subtotal<span class="pl-pds">'</span></span>, <span class="pl-c1">5</span>)
TaxableOrder.subtotal <span class="pl-k">!==</span> Order.subtotal</pre></div>

<h1>
<a id="stemplatetext--object" class="anchor" href="#stemplatetext--object" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.template(text [, object])</h1>

<p>The <code>S.template</code> method can return either a precompiled template function (if only the first argument is passed), or the string if the "<code>object</code>" argument is passed. The "<code>text</code>" is a string that can contain any javascript code inside wrapper tags "<code>&lt;% if(something === somethingElse) { %&gt; blabla &lt;% } %&gt;</code>" and can have javascript output on wrapper return tags "&lt;%= name %&gt;".</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Creates a precompiled template</span>
<span class="pl-s">var</span> tmpl <span class="pl-k">=</span> S.template(<span class="pl-s1"><span class="pl-pds">'</span>&lt;p&gt;&lt;%= name ? name : "?" %&gt;&lt;/p&gt;<span class="pl-pds">'</span></span>);

<span class="pl-c">// This will return "&lt;p&gt;joe&lt;/p&gt;";</span>
tmpl({name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>joe<span class="pl-pds">"</span></span>});

<span class="pl-c">// This will return "&lt;p&gt;?&lt;/p&gt;";</span>
tmpl({name<span class="pl-k">:</span> <span class="pl-c1">null</span>});

<span class="pl-c">// If a template will be used only once you can pass the options directly.</span>
<span class="pl-c">// This will return "&lt;p&gt;Dude&lt;/p&gt;"</span>
S.template(<span class="pl-s1"><span class="pl-pds">'</span>&lt;p&gt;&lt;%= name %&gt;&lt;/p&gt;<span class="pl-pds">'</span></span>, {name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Dude<span class="pl-pds">"</span></span>});</pre></div>

<p>In practice is very common to get the template from the html.</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">ul</span> <span class="pl-e">id</span>=<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>&gt;
&lt;/<span class="pl-ent">ul</span>&gt;

&lt;<span class="pl-ent">template</span> <span class="pl-e">id</span>=<span class="pl-s1"><span class="pl-pds">"</span>users-template<span class="pl-pds">"</span></span>&gt;
  &lt;% for(var i = 0; i &lt; users.lenght; i++) { %&gt;
    &lt;<span class="pl-ent">li</span>&gt;&lt;%= users[i].name %&gt;&lt;/<span class="pl-ent">li</span>&gt;
  &lt;% } %&gt;
&lt;/<span class="pl-ent">template</span>&gt;</pre></div>

<p>To use that in you javascript code is very simple.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Some list of users</span>
<span class="pl-s">var</span> users <span class="pl-k">=</span> [
  {name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Luiz<span class="pl-pds">"</span></span>},
  {name<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>Eden<span class="pl-pds">"</span></span>} ];

<span class="pl-c">// Precompile the template</span>
<span class="pl-s">var</span> tmpl <span class="pl-k">=</span> S.template(<span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">"</span>users-template<span class="pl-pds">"</span></span>).innerHTML);

<span class="pl-c">// Just update the html of the element you want.</span>
<span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>).innerHTML <span class="pl-k">=</span> tmpl({users<span class="pl-k">:</span> users});</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/lib/template_test.js">unit tests</a> for <code>S.template</code>.</p>

<h2>
<a id="stemplatewrapper" class="anchor" href="#stemplatewrapper" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.template.wrapper</h2>

<p>The default template wrapper is "<code>&lt;%?%&gt;</code>" but you can easily customize it will be the template wrapper that you need.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// change the wrappers to "`{{ code }}`" and "`{{= "output" }}`".</span>
S.template.wrapper <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>{{?}}<span class="pl-pds">"</span></span>;
S.template(<span class="pl-s1"><span class="pl-pds">"</span>&lt;p&gt;{{= x }}&lt;/p&gt;<span class="pl-pds">"</span></span>, {x<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>}) <span class="pl-k">===</span> <span class="pl-s1"><span class="pl-pds">"</span>&lt;p&gt;foo&lt;/p&gt;<span class="pl-pds">"</span></span>;

<span class="pl-c">// change the wrappers to "`&lt;t code t&gt;`" and "`&lt;t= "output" t&gt;`".</span>
S.template.wrapper <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>&lt;t?t&gt;<span class="pl-pds">"</span></span>
S.template(<span class="pl-s1"><span class="pl-pds">"</span>&lt;p&gt;&lt;t= x t&gt;&lt;/p&gt;<span class="pl-pds">"</span></span>, {x<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>}) <span class="pl-k">===</span> <span class="pl-s1"><span class="pl-pds">"</span>&lt;p&gt;bar&lt;/p&gt;<span class="pl-pds">"</span></span>;</pre></div>

<h1>
<a id="scontrollername-callback" class="anchor" href="#scontrollername-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.controller(name, callback)</h1>

<p>A <code>S.controller</code> method which creates a organized, performing and stateful controls with declarative event binding. Use this method to create UI controls and organize them into higher-order business rules with S.route. It can serve as both a traditionals views and controllers.</p>

<div class="highlight highlight-js"><pre>S.controller(<span class="pl-s1"><span class="pl-pds">'</span>increment<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">item</span>) {
  item.on(<span class="pl-s1"><span class="pl-pds">'</span>click<span class="pl-pds">'</span></span>, increment);

  <span class="pl-st">function</span> <span class="pl-en">increment</span>(<span class="pl-vpf">e</span>) {
    <span class="pl-s">var</span> input <span class="pl-k">=</span> e.<span class="pl-sc">target</span>;
    input.<span class="pl-sc">value</span> <span class="pl-k">=</span> paseInt(input.<span class="pl-sc">value</span>, <span class="pl-c1">10</span>) <span class="pl-k">+</span> <span class="pl-c1">1</span>;
  }
});</pre></div>

<p>If you want, you can add some options on controller callback.</p>

<div class="highlight highlight-js"><pre>S.controller(<span class="pl-s1"><span class="pl-pds">'</span>increment<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">item</span>, <span class="pl-vpf">options</span>) {
  <span class="pl-s">var</span> target <span class="pl-k">=</span> options.<span class="pl-sc">target</span> <span class="pl-k">||</span> item;

  item.on(<span class="pl-s1"><span class="pl-pds">'</span>click<span class="pl-pds">'</span></span>, increment);

  <span class="pl-st">function</span> <span class="pl-en">increment</span>(<span class="pl-vpf">e</span>) {
    <span class="pl-s">var</span> input <span class="pl-k">=</span> <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(e.<span class="pl-sc">target</span>);
    target.<span class="pl-sc">value</span> <span class="pl-k">=</span> <span class="pl-s3">parseInt</span>(input.<span class="pl-sc">value</span>, <span class="pl-c1">10</span>) <span class="pl-k">+</span> <span class="pl-c1">1</span>;
  }
});</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/lib/controller_test.js">unit tests</a> for <code>S.controller</code> and <code>S.control</code>.</p>

<h2>
<a id="scontrolname-element--options" class="anchor" href="#scontrolname-element--options" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.control(name, element [, options])</h2>

<p>A <code>S.control</code> method which be used to bind a controller. Usually as used inside a routes callbacks.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Increments the count on the `#increment-btn`</span>
S.control(<span class="pl-s1"><span class="pl-pds">'</span>increment<span class="pl-pds">'</span></span>, <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">"</span>increment-btn<span class="pl-pds">"</span></span>));

<span class="pl-c">// Increments the `#count` element</span>
S.control(<span class="pl-s1"><span class="pl-pds">'</span>increment<span class="pl-pds">'</span></span>, <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">"</span>increment-count-btn<span class="pl-pds">"</span></span>), {
  tagert<span class="pl-k">:</span> <span class="pl-s3">document</span>.querySelector(<span class="pl-s1"><span class="pl-pds">'</span>#count<span class="pl-pds">'</span></span>)
});</pre></div>

<h1>
<a id="sroute" class="anchor" href="#sroute" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.route</h1>

<p>The <code>S.route</code> method can do diverent things depending on what arguments are passed (following the jQuery sytle). The route matcher can have params <code>/search?q={query}</code> and wildcards <code>/users*</code>, and it is possible to have many one callbacks triggered for a given path.</p>

<p>Routes should be used to bind controllers, plugins or to trigger actions on a model. This will help to keep you code well organized and respond correctly to changes on the page.</p>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/lib/route_test.js">unit tests</a> for <code>S.route</code>.</p>

<h2>
<a id="sroutecallback" class="anchor" href="#sroutecallback" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.route(callback)</h2>

<p>This defines a generic route that will be called for all paths. This is usefull for binding plugins that will be used on all pages.</p>

<div class="highlight highlight-js"><pre>S.route(<span class="pl-st">function</span>(<span class="pl-vpf">params</span>) {
  <span class="pl-c">// binds select2 plugin to all `select` tags</span>
  <span class="pl-c">// http://ivaynberg.github.io/select2/</span>
  $(<span class="pl-s1"><span class="pl-pds">'</span>select<span class="pl-pds">'</span></span>).<span class="pl-s3">select</span>();

  <span class="pl-c">// prints the path of the current page.</span>
  <span class="pl-en">console</span><span class="pl-s3">.log</span>(params.path);
});</pre></div>

<h2>
<a id="sroutepath-callback" class="anchor" href="#sroutepath-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.route(path, callback)</h2>

<p>The given <code>callback</code> will be called for all routes that match the given <code>path</code> expression.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Sets a callback that will bind the 'search' controller</span>
<span class="pl-c">// on all paths that start with '/search'.</span>
S.route(<span class="pl-s1"><span class="pl-pds">'</span>/search*<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">params</span>) {
  S.controll(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>, <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">'</span>search-field<span class="pl-pds">'</span></span>), {
    target<span class="pl-k">:</span> <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">'</span>search-results<span class="pl-pds">'</span></span>),
    model<span class="pl-k">:</span> Search
  });
});

<span class="pl-c">// Sets a callback that will call the `Search.search`</span>
<span class="pl-c">// with the current path and given query</span>
<span class="pl-c">// for routes that match '/search?q={query}'</span>
S.route(<span class="pl-s1"><span class="pl-pds">'</span>/search?q={query}<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">params</span>) {
  Search.<span class="pl-s3">search</span>(params.path, params.query);
});</pre></div>

<h2>
<a id="srouteobject" class="anchor" href="#srouteobject" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.route(object)</h2>

<p>This sintax alows to set many route callbacks at once.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// This code will do exactly the same as the previous example.</span>
S.route({
  <span class="pl-c">// Sets a callback that will bind the 'search' controller</span>
  <span class="pl-c">// on all paths that start with '/search'.</span>
  <span class="pl-s1"><span class="pl-pds">'</span><span class="pl-en">/search*</span><span class="pl-pds">'</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">params</span>) {
    S.controll(<span class="pl-s1"><span class="pl-pds">'</span>search<span class="pl-pds">'</span></span>, <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">'</span>search-field<span class="pl-pds">'</span></span>), {
      target<span class="pl-k">:</span> <span class="pl-s3">document</span>.<span class="pl-s3">getElementById</span>(<span class="pl-s1"><span class="pl-pds">'</span>search-results<span class="pl-pds">'</span></span>),
      model<span class="pl-k">:</span> Search
    });
  },

  <span class="pl-c">// Sets a callback that will call the `Search.search`</span>
  <span class="pl-c">// with the current path and given query</span>
  <span class="pl-c">// for routes that match '/search?q={query}'</span>
  <span class="pl-s1"><span class="pl-pds">'</span><span class="pl-en">/search?q={query}</span><span class="pl-pds">'</span></span>: <span class="pl-st">function</span>(<span class="pl-vpf">params</span>) {
    Search.<span class="pl-s3">search</span>(params.path, params.query);
  }
});</pre></div>

<h2>
<a id="sroutepath--triggersvisit--true" class="anchor" href="#sroutepath--triggersvisit--true" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.route(path [, triggersVisit = true])</h2>

<p>Triggers all callbacks that match the given path, if <code>triggersVisit</code> is set to <code>false</code> it will NOT send a push state to update the browser.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Triggers all callbacks that match '/somepath'</span>
<span class="pl-c">// and also calls `route.trigger('visit', '/somepath')`</span>
<span class="pl-c">// that will send a push state to the browser updating</span>
<span class="pl-c">// the url if `ext/route_browser.js` was included.</span>
S.route(<span class="pl-s1"><span class="pl-pds">'</span>/somepath<span class="pl-pds">'</span></span>);

<span class="pl-c">// Triggers all callbacks that match '/somepath'</span>
<span class="pl-c">// but do NOT call `route.trigger('visit', '/somepath')`</span>
<span class="pl-c">// so the browser URL wont change</span>
S.route(<span class="pl-s1"><span class="pl-pds">'</span>/somepath<span class="pl-pds">'</span></span>, <span class="pl-c1">false</span>);</pre></div>

<h2>
<a id="srouteupdatepath--callsvisit--true" class="anchor" href="#srouteupdatepath--callsvisit--true" aria-hidden="true"><span class="octicon octicon-link"></span></a>S.route.update(path [, callsVisit = true])</h2>

<p>Updates a portion the current current url and calls all callbacks that match the new path, if callsVisit is set to <code>false</code> it will update the URL without triggering the callbacks.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// visits the '/search' and triggers all callbacks that match that route.</span>
S.route(<span class="pl-s1"><span class="pl-pds">'</span>/search<span class="pl-pds">'</span></span>);

<span class="pl-c">// Updates the current path to '/search?q=spice'</span>
<span class="pl-c">// and triggers all callbacks for visiting that route.</span>
S.route.update(<span class="pl-s1"><span class="pl-pds">'</span>?q=spice<span class="pl-pds">'</span></span>);

<span class="pl-c">// Updates the current path to '/search?q=spice#doc'</span>
<span class="pl-c">// WITHOUT triggering the callbacks for visinting that route</span>
S.route.update(<span class="pl-s1"><span class="pl-pds">'</span>#doc<span class="pl-pds">'</span></span>, <span class="pl-c1">false</span>);

<span class="pl-c">// Does exactly the same as `S.route('/search');`</span>
S.route.update(<span class="pl-s1"><span class="pl-pds">'</span>/search<span class="pl-pds">'</span></span>);</pre></div>

<h1>
<a id="extensions" class="anchor" href="#extensions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extensions</h1>

<p>The core of <em>Spice</em> is very minimal but supper flexible. With extensions it is easy to add powerfull features to <em>Spice</em> and to also to simplify the use of spice with other technologies.</p>

<p>All <em>Spice</em> extenssions work out-of-the-box without any settup, all you need to do is to include it on your app, and thats it!</p>

<p><em>Spice</em> already comes with some usefull extensions that will be explained in this chapter.</p>

<h2>
<a id="extpolyfilljs" class="anchor" href="#extpolyfilljs" aria-hidden="true"><span class="octicon octicon-link"></span></a>ext/polyfill.js</h2>

<p>Add this if you need for compatibility with old browsers (like IE7), if you dont care about old browsers you dont need it.</p>

<div class="highlight highlight-html"><pre><span class="pl-c">&lt;!--makes _Spice_ compatible with older browsers --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/polyfill.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h2>
<a id="extroute_browserjs" class="anchor" href="#extroute_browserjs" aria-hidden="true"><span class="octicon octicon-link"></span></a>ext/route_browser.js</h2>

<p>Enables the <code>S.route</code> to change, and listen to changes, on the browser url. It will automatically use pushState or fallback to "#/" if the browser dont support push state.</p>

<p>This extension should be used on the frontend of any app that needs the router.</p>

<div class="highlight highlight-html"><pre><span class="pl-c">&lt;!-- adds route extension for browser navigation --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/route_browser.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/ext/route_browser.html">tests</a> for <code>ext/route_browser</code>.</p>

<h2>
<a id="extroute_turbolinksjs" class="anchor" href="#extroute_turbolinksjs" aria-hidden="true"><span class="octicon octicon-link"></span></a>ext/route_turbolinks.js</h2>

<p>This is a complementary route extension that is only needed on apps use <a href="https://github.com/rails/turbolinks">turbolinks</a> and it must be added after the <code>ext/route_browser.js</code>. It will enable <em>Spice</em> router to listen to URL changes that are triggered by turbolinks.</p>

<div class="highlight highlight-html"><pre><span class="pl-c">&lt;!-- router will listen to turbolinks navigation --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/route_browser.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/route_turbolinks.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h2>
<a id="extjquerycontroljs" class="anchor" href="#extjquerycontroljs" aria-hidden="true"><span class="octicon octicon-link"></span></a>ext/jquery.control.js</h2>

<p>This supper cool extenssion will add a jQuery plugin that makes much easier to bind controllers to jQuery elements. I makes sure that the controller binds only once to an element that avoids issues of having the same element listening to duplicated events.</p>

<div class="highlight highlight-html"><pre><span class="pl-c">&lt;!-- adds the `.control` plugin to jquery --&gt;</span>
&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s1"><span class="pl-pds">"</span>bower_components/spicejs/ext/jquery.control.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>With this you can bind controllers using a jquery plugin.</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Creates a controller that logs when fields change</span>
S.controller(<span class="pl-s1"><span class="pl-pds">'</span>log-change<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">elements</span>, <span class="pl-vpf">function</span>(element) {
  elements.on(<span class="pl-s1"><span class="pl-pds">'</span>change<span class="pl-pds">'</span></span>, <span class="pl-st">function</span>(<span class="pl-vpf">e</span>) {
    <span class="pl-s">var</span> target <span class="pl-k">=</span> $(e.<span class="pl-sc">target</span>);
    <span class="pl-en">console</span><span class="pl-s3">.log</span>(target, <span class="pl-s1"><span class="pl-pds">'</span>changed to =&gt; <span class="pl-pds">'</span></span><span class="pl-k">+</span> target.val());
  });
});

<span class="pl-c">// Binds all inputs with [data-log-change] to the 'log-change' controller</span>
$(<span class="pl-s1"><span class="pl-pds">'</span>input[data-log-change]<span class="pl-pds">'</span></span>).control(<span class="pl-s1"><span class="pl-pds">'</span>log-change<span class="pl-pds">'</span></span>)</pre></div>

<p>Check the <a href="https://github.com/spicejs/spicejs/blob/master/test/ext/jquery.control.html">tests</a> for <code>ext/route_browser</code>.</p>

<h1>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h1>

<ul>
<li>
<a href="https://github.com/spicejs/spicejs-connect4">Connect4</a>: A simple connect4 game built with <strong>Spice</strong>.</li>
<li>
<a href="https://github.com/spicejs/snapguide">SnapGallery</a>: An Spice.js example that uses the routes and a sinatra backend.</li>
</ul>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
