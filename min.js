(function(e){"use strict";e.observable=function(e){var n={},r=[].slice;e.on=function(r,t){if(typeof t==="function"){r.replace(/[^\s]+/g,function(e,r){(n[e]=n[e]||[]).push(t);t.typed=r>0})}return e};e.off=function(r,t){if(r==="*")n={};else if(t){var u=n[r];for(var o=0,i;i=u&&u[o];++o){if(i===t)u.splice(o,1)}}else{r.replace(/[^\s]+/g,function(e){n[e]=[]})}return e};e.one=function(n,r){if(r)r.one=true;return e.on(n,r)};e.trigger=function(t){var u=r.call(arguments,1),o=n[t]||[];for(var i=0,c;c=o[i];++i){if(!c.busy){c.busy=true;c.apply(e,c.typed?[t].concat(u):u);if(c.one){o.splice(i,1);i--}c.busy=false}}return e};return e};e.render=function(){var e={},n={"\\":"\\\\","\n":"\\n","\r":"\\r","'":"\\'"},r={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};function t(r,t,o){if(o===true)o=u;r=r||"";return(e[r]=e[r]||new Function("_","e","return '"+r.replace(/[\\\n\r']/g,function(e){return n[e]}).replace(/{\s*([\w\.]+)\s*}/g,"' + (e?e(_.$1,'$1'):_.$1||(_.$1==null?'':_.$1)) + '")+"'"))(t,o)}function u(e,n){return e==null?"":(e+"").replace(/[&\"<>]/g,function(e){return r[e]})}return t}();e.route=function(){var n=[],r;function t(e,n){var r;if(typeof e==="function"){t("*",e)}else if(n){u(e,n)}else if(typeof e==="object"){for(r in e)e.hasOwnProperty(r)&&u(r,e[r])}else o(e);return t}function u(e,r){var t=["match"],u,o;u="^#?!?"+e.replace(/[\/\=\?\$\^]/g,"\\$&").replace(/\*/g,".*").replace(/\{(\w+)\}/g,function(e,n){t.push(n);return"(\\w+)"})+"$";n.push({regex:new RegExp(u),keys:t,callback:r})}function o(e){var u=n.length,o;for(o=0;o<u;o++)i(e,n[o]);r=e;t.trigger("visit",e)}function i(e,n){var r=e.match(n.regex);if(r)n.callback(c(e,n.keys,r))}function c(e,n,r){var t={path:e},u=n.length,o;for(o=0;o<u;o++)t[n[o]]=r[o];return t}t.clear=function(){n=[];t.trigger("clear");return t};t.load=function(){t.trigger("load");return t};t.map=n;t.current_path=r;return e.observable(t)}()})(typeof window!=="undefined"?window.E={}:exports);